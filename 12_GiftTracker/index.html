<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GiftTracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #F7F7F7;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #4B0082;
      margin-bottom: 20px;
    }

    .gift-list {
      max-width: 700px;
      margin: auto;
    }

    .gift-item {
      background: white;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: transform 0.2s;
    }

    .gift-item:hover {
      transform: scale(1.02);
    }

    .gift-details {
      flex: 1;
    }

    .gift-name {
      font-weight: bold;
      font-size: 18px;
      color: #4B0082;
      margin: 0 0 5px 0;
    }

    .gift-description {
      margin: 0;
      font-size: 14px;
      color: #333;
    }

    .recipient {
      font-size: 14px;
      color: #666;
    }

    .reminder {
      margin-left: 10px;
      color: #FF4500;
      font-size: 22px;
      display: none;
    }

    /* Buttons */
    .btn {
      padding: 6px 10px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
      margin-left: 5px;
    }

    .btn-edit {
      background: #1e90ff;
      color: #fff;
    }

    .btn-delete {
      background: #dc143c;
      color: #fff;
    }

    /* Input form */
    .add-gift-form {
      max-width: 700px;
      margin: 20px auto;
      padding: 15px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .add-gift-form input {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
    }

    .add-gift-form button {
      background: #4B0082;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
    }

    .add-gift-form button:hover {
      background: #371061;
    }

    /* Search bar */
    .search-bar {
      max-width: 700px;
      margin: 10px auto;
      display: flex;
      gap: 10px;
    }

    .search-bar input, .search-bar select {
      flex: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    /* Notification box */
    .notification {
      max-width: 700px;
      margin: 10px auto;
      padding: 10px;
      background: #ffe4b5;
      border-left: 5px solid #FF4500;
      border-radius: 8px;
      font-weight: bold;
      color: #333;
      display: none;
    }

    /* Mobile responsiveness */
    @media (max-width: 600px) {
      .gift-item {
        flex-direction: column;
        align-items: flex-start;
      }

      .reminder {
        margin-top: 10px;
        align-self: flex-end;
      }
    }
  </style>
</head>
<body>
  <h1>üéÅ GiftTracker</h1>

  <!-- Notification -->
  <div class="notification" id="notification"></div>

  <!-- Search & Filter -->
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="üîç Search gift or recipient">
    <select id="filterReminders">
      <option value="all">All Gifts</option>
      <option value="upcoming">Upcoming Reminders</option>
    </select>
  </div>

  <!-- Add gift form -->
  <div class="add-gift-form">
    <input type="text" id="giftName" placeholder="Gift name (required)" />
    <input type="text" id="giftDescription" placeholder="Description" />
    <input type="text" id="recipient" placeholder="Recipient (required)" />
    <input type="date" id="eventDate" />
    <button onclick="addGift()">‚ûï Add Gift</button>
  </div>

  <!-- Gift list -->
  <div class="gift-list" id="giftList"></div>

  <script>
    let gifts = JSON.parse(localStorage.getItem("gifts")) || [];

    function saveGifts() {
      localStorage.setItem("gifts", JSON.stringify(gifts));
    }

    function renderGifts() {
      const giftList = document.getElementById('giftList');
      giftList.innerHTML = "";

      const search = document.getElementById("searchInput").value.toLowerCase();
      const filter = document.getElementById("filterReminders").value;
      const today = new Date().toISOString().split('T')[0];
      const tomorrow = new Date();
      tomorrow.setDate(new Date().getDate() + 1);
      const tomorrowStr = tomorrow.toISOString().split('T')[0];

      gifts.forEach((gift, index) => {
        if (search && !gift.name.toLowerCase().includes(search) && !gift.recipient.toLowerCase().includes(search)) {
          return;
        }

        if (filter === "upcoming" && (!gift.eventDate || (gift.eventDate !== today && gift.eventDate !== tomorrowStr))) {
          return;
        }

        const giftItem = document.createElement('div');
        giftItem.classList.add('gift-item');

        const details = document.createElement('div');
        details.classList.add('gift-details');

        const giftName = document.createElement('p');
        giftName.classList.add('gift-name');
        giftName.textContent = gift.name;

        const giftDesc = document.createElement('p');
        giftDesc.classList.add('gift-description');
        giftDesc.textContent = gift.description;

        const giftRecipient = document.createElement('p');
        giftRecipient.classList.add('recipient');
        giftRecipient.textContent = "For: " + gift.recipient;

        details.appendChild(giftName);
        details.appendChild(giftDesc);
        details.appendChild(giftRecipient);

        // Reminder
        const reminderIcon = document.createElement('span');
        reminderIcon.classList.add('reminder');
        reminderIcon.innerHTML = "&#128276;"; // üîî

        if (gift.eventDate) {
          if (gift.eventDate >= today) {
            reminderIcon.style.display = 'inline';
            reminderIcon.title = "Reminder set for " + gift.eventDate;
          }
        }

        // Actions
        const actions = document.createElement('div');
        const editBtn = document.createElement('button');
        editBtn.textContent = "‚úèÔ∏è Edit";
        editBtn.classList.add("btn", "btn-edit");
        editBtn.onclick = () => editGift(index);

        const deleteBtn = document.createElement('button');
        deleteBtn.textContent = "üóëÔ∏è Delete";
        deleteBtn.classList.add("btn", "btn-delete");
        deleteBtn.onclick = () => deleteGift(index);

        actions.appendChild(reminderIcon);
        actions.appendChild(editBtn);
        actions.appendChild(deleteBtn);

        giftItem.appendChild(details);
        giftItem.appendChild(actions);

        giftList.appendChild(giftItem);
      });

      checkUpcomingReminders();
    }

    function addGift() {
      const name = document.getElementById('giftName').value.trim();
      const description = document.getElementById('giftDescription').value.trim();
      const recipient = document.getElementById('recipient').value.trim();
      const eventDate = document.getElementById('eventDate').value;

      if (!name || !recipient) {
        alert("Please enter gift name and recipient!");
        return;
      }

      gifts.push({ name, description, recipient, eventDate });
      saveGifts();
      renderGifts();

      document.getElementById('giftName').value = "";
      document.getElementById('giftDescription').value = "";
      document.getElementById('recipient').value = "";
      document.getElementById('eventDate').value = "";
    }

    function editGift(index) {
      const gift = gifts[index];
      document.getElementById('giftName').value = gift.name;
      document.getElementById('giftDescription').value = gift.description;
      document.getElementById('recipient').value = gift.recipient;
      document.getElementById('eventDate').value = gift.eventDate;

      gifts.splice(index, 1); // remove old one (will be replaced)
      saveGifts();
      renderGifts();
    }

    function deleteGift(index) {
      if (confirm("Are you sure you want to delete this gift?")) {
        gifts.splice(index, 1);
        saveGifts();
        renderGifts();
      }
    }

    function checkUpcomingReminders() {
      const today = new Date().toISOString().split('T')[0];
      const tomorrow = new Date();
      tomorrow.setDate(new Date().getDate() + 1);
      const tomorrowStr = tomorrow.toISOString().split('T')[0];

      let msg = "";
      gifts.forEach(gift => {
        if (gift.eventDate === today) {
          msg += `üéâ Today is ${gift.recipient}'s event! (${gift.name})\n`;
        }
        if (gift.eventDate === tomorrowStr) {
          msg += `‚è∞ Tomorrow is ${gift.recipient}'s event! (${gift.name})\n`;
        }
      });

      const notification = document.getElementById("notification");
      if (msg) {
        notification.style.display = "block";
        notification.textContent = msg;
      } else {
        notification.style.display = "none";
      }
    }

    document.getElementById("searchInput").addEventListener("input", renderGifts);
    document.getElementById("filterReminders").addEventListener("change", renderGifts);

    renderGifts();
  </script>
</body>
</html>
